# Quick Start Guide: Отслеживание прогресса проектов из Kaiten

**Date**: 2025-02-02  
**Feature**: 001-kaiten-progress-tracker

## Overview

Этот документ описывает основные сценарии использования приложения для отслеживания прогресса проектов из Kaiten.

## Prerequisites

1. Доступ к Kaiten API (API token)
2. Настроенный Supabase проект (PostgreSQL)
3. Настроенный пароль для доступа к приложению

## User Scenarios

### Scenario 1: Создание проекта и привязка к Kaiten

**Цель**: Создать новый проект и привязать к нему этапы из Kaiten.

**Шаги**:
1. Пользователь открывает приложение и вводит пароль
2. На главной странице нажимает "Создать проект"
3. Вводит название проекта
4. Нажимает "Привязать этапы из Kaiten"
5. В модальном окне:
   - Выбирает доску Kaiten из списка
   - Видит предварительный просмотр групп (этапов) доски
   - Выбирает группы для импорта
   - Для каждого этапа устанавливает даты начала и окончания
6. Нажимает "Импортировать"
7. Проект создан с этапами, привязанными к Kaiten

**Результат**: Проект отображается в списке проектов с таймлайном этапов.

---

### Scenario 2: Просмотр прогресса проекта

**Цель**: Увидеть текущий прогресс проекта по этапам.

**Шаги**:
1. Пользователь открывает список проектов
2. Видит прогресс-бары для каждого проекта
3. Кликает на проект для детального просмотра
4. Видит таймлайн с этапами:
   - Каждый этап представлен ячейкой
   - Заполнение ячейки показывает процент выполнения
   - Параллельные этапы размещены в отдельных рядах
5. Наводит курсор на ячейку этапа → видит даты начала и окончания
6. Кликает на ячейку этапа → открывается детальная информация

**Результат**: Пользователь видит актуальный прогресс проекта на основе статусов задач из Kaiten.

---

### Scenario 3: Синхронизация данных с Kaiten

**Цель**: Обновить данные проекта из Kaiten.

**Шаги**:
1. Пользователь открывает проект
2. Нажимает кнопку "Обновить из Kaiten"
3. Система:
   - Запрашивает актуальные задачи из Kaiten API
   - Обновляет кэш задач
   - Пересчитывает прогресс каждого этапа
4. Таймлайн обновляется с новыми данными

**Результат**: Прогресс проекта отражает актуальное состояние задач в Kaiten.

---

### Scenario 4: Управление этапом

**Цель**: Изменить параметры этапа (название, даты, статус).

**Шаги**:
1. Пользователь открывает проект
2. Кликает на ячейку этапа в таймлайне
3. В боковой панели этапа:
   - Переименовывает этап
   - Изменяет даты начала и окончания
   - Ставит этап на паузу с указанием причины
   - Просматривает список задач и их статусы
4. Сохраняет изменения

**Результат**: Изменения этапа сохранены и отображаются в таймлайне.

---

### Scenario 5: Завершение и архивация проекта

**Цель**: Завершить проект и отправить в архив.

**Шаги**:
1. Пользователь открывает проект
2. В боковой панели проекта нажимает "Завершить проект"
3. Проект помечается как завершённый и автоматически перемещается в архив
4. Проект исчезает из основного списка
5. Пользователь открывает раздел "Архив"
6. Видит завершённый проект в списке архивных

**Результат**: Проект завершён и перемещён в архив, не отображается в основном списке.

---

### Scenario 6: Перепривязка этапов при изменении структуры в Kaiten

**Цель**: Обновить привязку этапов после изменения структуры в Kaiten.

**Шаги**:
1. Пользователь открывает проект
2. В боковой панели проекта нажимает "Перепривязать этапы"
3. В модальном окне:
   - Выбирает обновлённую доску Kaiten
   - Видит текущие этапы проекта и новые группы в Kaiten
   - Сопоставляет этапы проекта с новыми группами Kaiten
4. Сохраняет перепривязку
5. Система обновляет `kaitenGroupId` для этапов

**Результат**: Этапы проекта привязаны к актуальной структуре Kaiten.

---

## Error Scenarios

### Kaiten API недоступен

**Ситуация**: При создании проекта или синхронизации Kaiten API возвращает ошибку.

**Обработка**:
- Показывается сообщение об ошибке
- Предлагается повторить попытку (retry)
- Данные проекта сохраняются, но без синхронизации с Kaiten
- Пользователь может синхронизировать позже

---

### Этап в Kaiten удалён

**Ситуация**: Группа (этап) в Kaiten была удалена, но привязана к проекту.

**Обработка**:
- Этап помечается как "недоступен в Kaiten"
- В таймлайне отображается предупреждение
- Пользователь может перепривязать этап к другой группе или удалить

---

### Задачи не синхронизированы

**Ситуация**: Задачи в Kaiten изменили статус, но синхронизация ещё не выполнена.

**Обработка**:
- Прогресс отображается на основе последних синхронизированных данных
- Пользователь может обновить данные кнопкой "Обновить из Kaiten"
- При следующей синхронизации прогресс обновится автоматически

---

## Performance Considerations

### Большое количество этапов

**Ситуация**: Проект содержит 20+ этапов.

**Обработка**:
- Таймлайн использует виртуализацию для рендеринга только видимых этапов
- Параллельные этапы группируются для оптимизации layout

### Медленная синхронизация

**Ситуация**: Синхронизация с Kaiten занимает много времени.

**Обработка**:
- Показывается индикатор загрузки
- Синхронизация выполняется в фоне
- Пользователь может продолжить работу с уже загруженными данными

---

## Best Practices

1. **Регулярная синхронизация**: Синхронизируйте проекты после значительных изменений в Kaiten
2. **Проверка привязок**: Периодически проверяйте, что этапы корректно привязаны к группам Kaiten
3. **Архивация**: Завершённые проекты автоматически архивируются для поддержания чистоты основного списка
4. **Даты этапов**: Устанавливайте реалистичные даты начала и окончания для корректного отображения в таймлайне
